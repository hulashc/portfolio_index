// Project Screenshot Data
const projectScreenshots = {
  'data-pipeline-optimization': {
    title: 'Data Pipeline Optimization',
    screenshots: [
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center'
    ]
  },
  'machine-learning-platform': {
    title: 'Machine Learning Platform',
    screenshots: [
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center'
    ]
  },
  'real-time-analytics-dashboard': {
    title: 'Real-time Analytics Dashboard',
    screenshots: [
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center'
    ]
  },
  'data-warehouse-architecture': {
    title: 'Data Warehouse Architecture',
    screenshots: [
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center'
    ]
  },
  'etl-automation-framework': {
    title: 'ETL Automation Framework',
    screenshots: [
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center'
    ]
  },
  'big-data-processing-engine': {
    title: 'Big Data Processing Engine',
    screenshots: [
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center'
    ]
  },
  'data-quality-monitoring': {
    title: 'Data Quality Monitoring',
    screenshots: [
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center'
    ]
  },
  'streaming-data-platform': {
    title: 'Streaming Data Platform',
    screenshots: [
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center'
    ]
  },
  'data-governance-framework': {
    title: 'Data Governance Framework',
    screenshots: [
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center'
    ]
  },
  'predictive-analytics-engine': {
    title: 'Predictive Analytics Engine',
    screenshots: [
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center'
    ]
  },
  'data-visualization-suite': {
    title: 'Data Visualization Suite',
    screenshots: [
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1555949963-ff9fe0c870eb?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=600&h=400&fit=crop&crop=center',
      'https://images.unsplash.com/photo-1677442136019-21780ecad995?w=600&h=400&fit=crop&crop=center'
    ]
  }
};

// Popup functionality
let currentSlide = 0;
let currentProject = null;
let slideInterval = null;

function showPopup(projectId) {
  const project = projectScreenshots[projectId];
  if (!project) return;

  currentProject = projectId;
  currentSlide = 0;

  // Update popup title
  document.getElementById('popupTitle').textContent = project.title;

  // Load screenshots
  project.screenshots.forEach((screenshot, index) => {
    const slide = document.getElementById(`slide${index + 1}`);
    const img = document.getElementById(`img${index + 1}`);

    if (slide && img) {
      img.src = screenshot;
      slide.classList.remove('active');
    }
  });

  // Show first slide
  document.getElementById('slide1').classList.add('active');
  updateNavigationDots();

  // Show popup
  document.getElementById('popupOverlay').classList.add('active');
  document.getElementById('projectPopup').classList.add('active');

  // Start auto-rotation
  startAutoRotation();
}

function hidePopup() {
  document.getElementById('popupOverlay').classList.remove('active');
  document.getElementById('projectPopup').classList.remove('active');
  stopAutoRotation();
}

function showSlide(slideIndex) {
  // Hide all slides
  for (let i = 1; i <= 5; i++) {
    document.getElementById(`slide${i}`).classList.remove('active');
  }

  // Show selected slide
  document.getElementById(`slide${slideIndex + 1}`).classList.add('active');
  currentSlide = slideIndex;
  updateNavigationDots();
}

function updateNavigationDots() {
  const dots = document.querySelectorAll('.screenshot-dot');
  dots.forEach((dot, index) => {
    dot.classList.toggle('active', index === currentSlide);
  });
}

function startAutoRotation() {
  stopAutoRotation();
  slideInterval = setInterval(() => {
    currentSlide = (currentSlide + 1) % 5;
    showSlide(currentSlide);
  }, 3000);
}

function stopAutoRotation() {
  if (slideInterval) {
    clearInterval(slideInterval);
    slideInterval = null;
  }
}

// Event listeners
document.addEventListener('DOMContentLoaded', function () {
  // Add hover event listeners to project links
  const projectLinks = document.querySelectorAll('.wo-l-li');
  projectLinks.forEach(link => {
    const href = link.getAttribute('href');
    if (href) {
      const projectId = href.replace('/work/', '');

      // Show popup on hover
      link.addEventListener('mouseenter', () => {
        showPopup(projectId);
      });

      // Hide popup when mouse leaves the project area
      link.addEventListener('mouseleave', () => {
        // Small delay to prevent flickering
        setTimeout(() => {
          if (!document.getElementById('projectPopup').matches(':hover')) {
            hidePopup();
          }
        }, 100);
      });
    }
  });

  // Close popup when clicking overlay
  document.getElementById('popupOverlay').addEventListener('click', hidePopup);

  // Close popup when clicking close button
  document.getElementById('popupClose').addEventListener('click', hidePopup);

  // Navigation dots click events
  const dots = document.querySelectorAll('.screenshot-dot');
  dots.forEach((dot, index) => {
    dot.addEventListener('click', () => {
      showSlide(index);
      stopAutoRotation();
      startAutoRotation();
    });
  });

  // Pause auto-rotation when hovering over popup
  document.getElementById('projectPopup').addEventListener('mouseenter', stopAutoRotation);
  document.getElementById('projectPopup').addEventListener('mouseleave', startAutoRotation);
});

// Close popup with Escape key
document.addEventListener('keydown', function (e) {
  if (e.key === 'Escape') {
    hidePopup();
  }
});
